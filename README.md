# Payroll System

> âš ï¸ **Status**: This project is currently in progress and under active development.

A modern full-stack payroll management system built with Laravel and Vue.js. This application provides a comprehensive solution for managing employees, user authentication, and role-based access control.

## ğŸš€ Features

- **Authentication & Authorization**
  - Secure login and registration
  - Role-based access control (Admin, Employee)
  - Laravel Sanctum for session-based authentication
  - CSRF protection

- **Employee Management**
  - Create, read, update, and delete employees
  - Employee profile management
  - Search and filter employees
  - Employee ID management

- **Admin Dashboard**
  - Overview dashboard with statistics
  - Employee management interface
  - User management capabilities
  - Settings management (placeholder routes)

- **Employee Dashboard**
  - Personal profile view
  - Employee information display

- **Modern UI/UX**
  - Responsive design with Vuetify
  - Clean and intuitive interface
  - Global loading indicators
  - Form validation with Zod and VeeValidate

## ğŸ› ï¸ Tech Stack

### Backend
- **Framework**: Laravel 12
- **PHP**: 8.2+
- **Database**: SQLite (configurable)
- **Authentication**: Laravel Sanctum
- **Authorization**: Spatie Laravel Permission
- **Testing**: Pest PHP

### Frontend
- **Framework**: Vue 3 (Composition API)
- **Language**: TypeScript
- **UI Library**: Vuetify 3
- **State Management**: Pinia
- **Data Fetching**: TanStack Vue Query
- **Form Validation**: VeeValidate + Zod
- **Routing**: Vue Router 4
- **Build Tool**: Vite
- **Testing**: Vitest, Cypress, Playwright

## ğŸ“‹ Prerequisites

Before you begin, ensure you have the following installed:

- **PHP** >= 8.2
- **Composer** >= 2.0
- **Node.js** >= 20.19.0 or >= 22.12.0
- **npm** >= 9.0
- **SQLite** (or MySQL/PostgreSQL if preferred)

## ğŸ”§ Installation

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd payroll
   ```

2. **Backend Setup**
   ```bash
   cd backend
   
   # Install PHP dependencies
   composer install
   
   # Copy environment file
   cp .env.example .env
   
   # Generate application key
   php artisan key:generate
   
   # Create database file (SQLite)
   touch database/database.sqlite
   
   # Run migrations
   php artisan migrate
   
   # Seed the database (creates admin user and roles)
   php artisan db:seed
   ```

3. **Frontend Setup**
   ```bash
   cd frontend
   
   # Install Node dependencies
   npm install
   ```

4. **Environment Configuration**

   **Backend** (`.env` in `backend/` directory):
   ```env
   APP_NAME="Payroll System"
   APP_ENV=local
   APP_KEY=(generated by artisan key:generate)
   APP_DEBUG=true
   APP_URL=http://localhost:8000
   
   DB_CONNECTION=sqlite
   DB_DATABASE=/absolute/path/to/backend/database/database.sqlite
   
   SESSION_DRIVER=file
   SESSION_LIFETIME=120
   
   SANCTUM_STATEFUL_DOMAINS=localhost:5173
   ```

   **Frontend** (`.env` in `frontend/` directory):
   ```env
   VITE_API_BASE_URL=http://localhost:8000/api/v1
   VITE_WEB_BASE_URL=http://localhost:8000
   ```

## ğŸƒ Running the Application

### Development Mode

**Option 1: Run separately**

Backend (Terminal 1):
```bash
cd backend
php artisan serve
```
Backend will run on `http://localhost:8000`

Frontend (Terminal 2):
```bash
cd frontend
npm run dev
```
Frontend will run on `http://localhost:5173`

**Option 2: Run together (Backend script)**

From the root directory:
```bash
cd backend
composer run dev
```
This will concurrently run the Laravel server, queue worker, logs, and Vite dev server.

### Production Build

**Backend:**
```bash
cd backend
composer install --optimize-autoloader --no-dev
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

**Frontend:**
```bash
cd frontend
npm run build
```
Built files will be in `frontend/dist/`

## ğŸ” Default Credentials

After seeding the database, you can login with:

- **Email**: `admin@example.com`
- **Password**: `password`

âš ï¸ **Important**: Change the default password immediately in production!

## ğŸ‘¥ Creating Admin Users

See the [CREATE_ADMIN_USER.md](backend/CREATE_ADMIN_USER.md) file for detailed instructions on creating admin users. Quick methods:

**Using Seeder:**
```bash
php artisan db:seed --class=AdminUserSeeder
```

**Using Artisan Command:**
```bash
php artisan make:admin \
  --first-name="Admin" \
  --last-name="User" \
  --email="admin@example.com" \
  --password="your-secure-password"
```

## ğŸ§ª Testing

### Backend Tests
```bash
cd backend
composer test
# or
php artisan test
```

### Frontend Tests

**Unit Tests:**
```bash
cd frontend
npm run test:unit
```

**E2E Tests (Cypress):**
```bash
npm run test:e2e:dev
```

**E2E Tests (Playwright):**
```bash
npx playwright install
npm run test:e2e
```

**Type Checking:**
```bash
npm run type-check
```

**Linting:**
```bash
npm run lint
```

## ğŸ“ Project Structure

```
payroll/
â”œâ”€â”€ backend/                 # Laravel backend application
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ Console/
â”‚   â”‚   â”œâ”€â”€ Exceptions/
â”‚   â”‚   â”œâ”€â”€ Http/
â”‚   â”‚   â”‚   â”œâ”€â”€ Controllers/    # API controllers
â”‚   â”‚   â”‚   â”œâ”€â”€ Requests/       # Form request validation
â”‚   â”‚   â”‚   â”œâ”€â”€ Resources/      # API resources
â”‚   â”‚   â”‚   â””â”€â”€ Responses/      # Response classes
â”‚   â”‚   â”œâ”€â”€ Models/             # Eloquent models
â”‚   â”‚   â”œâ”€â”€ Policies/           # Authorization policies
â”‚   â”‚   â”œâ”€â”€ Providers/          # Service providers
â”‚   â”‚   â””â”€â”€ Services/           # Business logic services
â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”œâ”€â”€ migrations/         # Database migrations
â”‚   â”‚   â””â”€â”€ seeders/            # Database seeders
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ api.php             # API routes
â”‚   â””â”€â”€ tests/                  # Pest tests
â”‚
â””â”€â”€ frontend/               # Vue.js frontend application
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ assets/         # Static assets (CSS, images)
    â”‚   â”œâ”€â”€ components/     # Vue components
    â”‚   â”œâ”€â”€ composables/    # Vue composables
    â”‚   â”œâ”€â”€ layouts/        # Layout components
    â”‚   â”œâ”€â”€ lib/            # Utility libraries (axios, etc.)
    â”‚   â”œâ”€â”€ pages/          # Page components
    â”‚   â”œâ”€â”€ plugins/        # Vue plugins
    â”‚   â”œâ”€â”€ router/         # Vue Router configuration
    â”‚   â”œâ”€â”€ stores/         # Pinia stores
    â”‚   â”œâ”€â”€ types/          # TypeScript types
    â”‚   â”œâ”€â”€ validation/     # Validation schemas
    â”‚   â””â”€â”€ views/          # View components
    â”œâ”€â”€ cypress/            # Cypress E2E tests
    â””â”€â”€ e2e/                # Playwright E2E tests
```

## ğŸ”Œ API Endpoints

### Authentication
- `POST /api/v1/login` - User login
- `POST /api/v1/logout` - User logout
- `POST /api/v1/register` - User registration
- `GET /api/v1/user` - Get current authenticated user

### Employees (Protected - Admin Only)
- `GET /api/v1/employees` - List all employees
- `POST /api/v1/employees` - Create new employee
- `GET /api/v1/employees/{id}` - Get employee details
- `PUT /api/v1/employees/{id}` - Update employee
- `DELETE /api/v1/employees/{id}` - Delete employee

All API routes are prefixed with `/api/v1` and protected routes require authentication via Laravel Sanctum.

## ğŸ¨ UI Components

The frontend uses Vuetify components with a custom theme. Key components include:

- **DashboardLayout**: Main layout with sidebar navigation and app bar
- **EmployeesList**: Employee management table with filtering and actions
- **AdminDashboard**: Admin overview dashboard
- **EmployeeDashboard**: Employee profile dashboard

## ğŸ”’ Security Features

- CSRF protection for all state-changing operations
- Session-based authentication with Laravel Sanctum
- Role-based access control (RBAC) using Spatie Permission
- Password hashing using bcrypt
- XSS protection via Vue.js automatic escaping
- CORS configuration for API security

## ğŸ› Troubleshooting

### Common Issues

**401 Unauthorized errors:**
- Ensure cookies are enabled in your browser
- Check that `SANCTUM_STATEFUL_DOMAINS` includes your frontend domain
- Verify session configuration in `.env`

**Database errors:**
- Ensure SQLite file exists: `touch backend/database/database.sqlite`
- Check file permissions on the database file
- Run migrations: `php artisan migrate:fresh --seed`

**Frontend build errors:**
- Clear node_modules: `rm -rf node_modules && npm install`
- Check Node.js version: `node --version` (should be >= 20.19.0)

**CORS issues:**
- Update `config/cors.php` with your frontend URL
- Ensure `SANCTUM_STATEFUL_DOMAINS` matches your frontend domain

## ğŸ“ Development Guidelines

### Code Style

**Backend:**
- Follow PSR-12 coding standards
- Use Laravel Pint for code formatting: `composer pint`

**Frontend:**
- Follow Vue.js style guide
- Use ESLint for linting: `npm run lint`
- Use Prettier for formatting: `npm run format`

### Commit Messages
- Use clear, descriptive commit messages
- Reference issue numbers when applicable

## ğŸ“„ License

This project is open-sourced software licensed under the [MIT license](https://opensource.org/licenses/MIT).

## ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“š Additional Documentation

- [Backend API Routes Analysis](backend/API_ROUTES_ANALYSIS.md)
- [Create Admin User Guide](backend/CREATE_ADMIN_USER.md)
- [Frontend Developer Guide](frontend/DEVELOPER_GUIDE.md)
- [Validation Guide](frontend/VALIDATION_GUIDE.md)

## ğŸ™ Acknowledgments

- [Laravel](https://laravel.com) - The PHP Framework
- [Vue.js](https://vuejs.org) - The Progressive JavaScript Framework
- [Vuetify](https://vuetifyjs.com) - Material Design Component Framework
- [Spatie](https://spatie.be) - Laravel Permission Package
